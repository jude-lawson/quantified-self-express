{"version":3,"sources":["../../src/models/Meal.js"],"names":["Meal","QueryService","allMeals","result","sorted_result","rows","sort","a","b","id","meal_id","aMealAndAllItsFoods","rowCount","status","data","error","meal_foods","map","row","food_id","name","food_name","calories","meal_name","foods"],"mappings":";;;;;;;;AAAA;;;;;;;;;;IAGMA,I;;;;;;;;;;;;;;;uBAEmBC,uBAAaC,QAAb,E;;;AAAfC,sB;AACAC,6B,GAAgBD,OAAOE,IAAP,CAAYC,IAAZ,CAAiB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC7C,yBAAOD,EAAEE,EAAF,GAAOD,EAAEC,EAAhB;AACD,iBAFmB,C;iDAGbL,a;;;;;;;;;;;;;;;;;;;4FAGkBM,O;;;;;;;uBACRT,uBAAaU,mBAAb,CAAiCD,OAAjC,C;;;AAAfP,sB;;oBACCA,OAAOS,Q;;;;;kDACH,EAAEC,QAAQ,GAAV,EAAeC,MAAM,EAAEC,OAAO,gBAAT,EAArB,E;;;AAEHC,0B,GAAab,OAAOE,IAAP,CAAYY,GAAZ,CAAgB,eAAO;AACtC,yBAAO;AACLR,wBAAIS,IAAIC,OADH;AAELC,0BAAMF,IAAIG,SAFL;AAGLC,8BAAUJ,IAAII;AAHT,mBAAP;AAKD,iBANgB,C;kDAQV,EAAET,QAAQ,GAAV,EAAeC,MAAM,EAAEL,IAAIN,OAAOE,IAAP,CAAY,CAAZ,EAAeK,OAArB,EAA8BU,MAAMjB,OAAOE,IAAP,CAAY,CAAZ,EAAekB,SAAnD,EAA8DC,OAAOR,UAArE,EAArB,E;;;;;;;;;;;;;;;;;;;;;kBAKEhB,I","file":"Meal.js","sourcesContent":["import QueryService from '../services/QueryService';\n\n\nclass Meal {\n  static async getAllMeals() {\n      let result = await QueryService.allMeals();\n      let sorted_result = result.rows.sort((a, b) => {\n        return a.id - b.id;\n      });\n      return sorted_result\n  }\n\n  static async getMealAndFoods(meal_id) {\n    let result = await QueryService.aMealAndAllItsFoods(meal_id)\n    if (!result.rowCount) {\n      return { status: 404, data: { error: 'Meal not found' } }\n    } else {\n      let meal_foods = result.rows.map(row => {\n        return {\n          id: row.food_id,\n          name: row.food_name,\n          calories: row.calories\n        }\n      });\n\n      return { status: 200, data: { id: result.rows[0].meal_id, name: result.rows[0].meal_name, foods: meal_foods } }\n    }\n  }\n}\n\nexport default Meal;\n"]}